## Glitch Mint Logo

Glitch Mint Logo - это утилита для отображения лого загрузки Mint с глитч-эффектами
(на самом деле лого может быть любым, но я сделал только для Mint). Сначала я хотел
сделать эффекты стандартными средствами Plymouth, однако его скриптовый язык оказался
очень ограничен.

## Зависимости

- systemd
- libdrm2 (>= 2.4.107-8)
- libpng16-16 (>= 1.6.37-2)
- libfreetype6 (>= 2.10.1-2)
- libconfig9 (>= 1.5-0.4)

## Сборка

Установите библиотеки при необходимости:

```sh
sudo apt-get install libconfig-dev libpng-dev libfreetype6-dev libsystemd-dev
```

Скомпилируйте исполняемый файл:

```sh
mkdir release/
cmake -B release/ .
make -C release/
```

Затем соберите и установите deb-пакет:

```sh
./build-deb.sh
sudo apt install ./<название пакета>.deb
```

Название пакета зависит от текущей версии и архитектуры.

## Настройка

Данная утилита требует два условия для работы:

- Наличие опции ядра **splash**
- Отсутствие опции ядра **glitch-mint-logo.enable=0**

Также рекомендуется указать опцию **quiet**, для того, чтобы при загрузке на экран не выводились логи.

Если в системе установлен Plymouth, необходимо отключить его. Для этого нужно открыть файл
**/etc/default/grub** в текстовом редакторе от рута, найти строку, которая начинается с
**GRUB_CMDLINE_LINUX_DEFAULT** и добавить туда опцию **plymouth.enable=0**.

Если вы захотите включить Plymouth обратно, удалите опцию **plymouth.enable=0** и добавьте
**glitch-mint-logo.enable=0**, это необходимо для избежания конфликтов Glitch Mint Logo и Plymouth.

После редактирования **/etc/default/grub** необходимо обновить grub:
`sudo update-grub`

## Конфиг

Конфиг распложен по пути **/etc/glitch-mint-logo/config**. Его натройки:

- **card_path** - путь к файлу для сообщения с libdrm. По умолчанию **/dev/dri/card0**
- **module** - название модуля. Все модули ищутся в папке /lib и начинаются с префикса _libgml-_
- **socket_path** - путь к сокету для оповещения главного процесса о загрузке модулей
- Настройки, специфичные для модулей (например, **mint_logo\_\_logo_path** и **mint_logo\_\_font_path** - настройки модуля **libgml-mint-logo.so**)
